DROP TABLE IF EXISTS emails;
DROP TABLE IF EXISTS phone_numbers;
DROP TABLE IF EXISTS users;

CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  login VARCHAR UNIQUE NOT NULL,
  name VARCHAR NOT NULL,
  birthday DATE NOT NULL,
  account_balance BIGINT NOT NULL
);

CREATE TABLE IF NOT EXISTS phone_numbers (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id BIGINT REFERENCES users (id) ON DELETE CASCADE,
  phone_number VARCHAR UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS emails (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id BIGINT REFERENCES users (id) ON DELETE CASCADE,
  email VARCHAR UNIQUE NOT NULL
);